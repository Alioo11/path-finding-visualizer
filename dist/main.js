/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{g:()=>Te,C:()=>De});const t="target",n={animationDuration:1e3,default:!0},o=(e,o,l=n)=>{e.style.animationDuration=l.default?"":`${l.animationDuration}ms`,e.className=e.className===t?t:o},l=(e,t)=>{localStorage.getItem("WIDTH")<40&&(e.innerHTML=t)},i=(e,t,o=n)=>{e.style.animationDuration=o.default?"":`${o.animationDuration}ms`,e.className=t};function a(e,t,n,o){this.node=e,this.orgin=t,this.type=n,this.cost=o}const s=e=>new Promise(((t,n)=>{setTimeout((()=>{t()}),e||30)}));function r(){let e=(parseInt(window.innerWidth/30)-2)%2==0?parseInt(window.innerWidth/30)-3:parseInt(window.innerWidth/30)-2,t=window.innerWidth<400?parseInt(window.innerHeight/30)-1:parseInt(window.innerHeight/30)-3-2,n=!1,o=null,l=null;localStorage.setItem("WIDTH",e),localStorage.setItem("HEIGHT",t),this.getWidth=()=>e,this.getHeight=()=>t,this.getAlgorithm=()=>o,this.getMazeAlgorithm=()=>l,this.getRunning=()=>n,this.swapRunning=()=>{n=!n},this.setAlgorithm=e=>{o=e},this.setMazeAlgorithm=e=>{l=e},this.setWidth=t=>{e=t,console.log(e)},this.setHeight=e=>{t=e}}const c=new r,d=(e,t=1,n=!1)=>{const o=c.getWidth(),l=c.getHeight();if(!e)return[];const i=[],a=parseInt(e.id);return a-o*t>=0&&i.push(Te[a-o*t]),a%o+t<o&&i.push(Te[a+1*t]),a+o*t<o*l&&i.push(Te[a+o*t]),a%o>=t&&i.push(Te[a-1*t]),i?i.filter((e=>"cell"===e.className||"weight"===e.className||"target"===e.className||n?"wall":"")):[]},h=(e,t=1,n)=>{const o=c.getWidth(),l=c.getHeight();if(!e)return[];const i=[],a=parseInt(e.id);return a-o*t>=0&&i.push(Te[a-o*t]),a%o+t<o&&i.push(Te[a+1*t]),a+o*t<o*l&&i.push(Te[a+o*t]),a%o>=t&&i.push(Te[a-1*t]),i?n?i.filter((e=>n.includes(e.className))):i:[]},g=async e=>{const t=[];for(;null!==e.orgin;)t.push(e.node),e=e.orgin;for(let e=t.length-1;e>=0;e--)await s(10),o(t[e],"path",{animationDuration:1e3})};class u{constructor(e,t=null,n=null){this.data=e,this.left=t,this.right=n}}class m{constructor(){this.root=null}add(e){const t=this.root;if(null!==t){const n=function(t){if(e<t.data){if(null===t.left)return void(t.left=new u(e));if(null!==t.left)return n(t.left)}else{if(!(e>t.data))return null;if(null===t.right)return void(t.right=new u(e));if(null!==t.right)return n(t.right)}};return n(t)}this.root=new u(e)}findMin(){let e=this.root;for(;null!==e.left;)e=e.left;return e.data}findMax(){let e=this.root;for(;null!==e.right;)e=e.right;return e.data}find(e){if(!e||!this.root)return null;let t=this.root;for(;t.data!==e;)if(t=e<t.data?t.left:t.right,null===t)return null;return t}isPresent(e){let t=this.root;for(;t;){if(e===t.data)return!0;t=e<t.data?t.left:t.right}return!1}remove(e){const t=function(e,n){if(null==e)return null;if(n==e.data){if(null==e.left&&null==e.right)return null;if(null==e.left)return e.right;if(null==e.right)return e.left;for(var o=e.right;null!==o.left;)o=o.left;return e.data=o.data,e.right=t(e.right,o.data),e}return n<e.data?(e.left=t(e.left,n),e):(e.right=t(e.right,n),e)};this.root=t(this.root,e)}isBalanced(){return this.findMinHeight()>=this.findMaxHeight()-1}findMinHeight(e=this.root){if(null==e)return-1;let t=this.findMinHeight(e.left),n=this.findMinHeight(e.right);return t<n?t+1:n+1}findMaxHeight(e=this.root){if(null==e)return-1;let t=this.findMaxHeight(e.left),n=this.findMaxHeight(e.right);return t>n?t+1:n+1}inOrder(){if(null==this.root)return null;{var e=new Array;function t(n){n.left&&t(n.left),e.push(n.data),n.right&&t(n.right)}return t(this.root),e}}preOrder(){if(null==this.root)return null;{var e=new Array;function t(n){e.push(n.data),n.left&&t(n.left),n.right&&t(n.right)}return t(this.root),e}}postOrder(){if(null==this.root)return null;{var e=new Array;function t(n){n.left&&t(n.left),n.right&&t(n.right),e.push(n.data)}return t(this.root),e}}levelOrder(){let e=[],t=[];if(null!=this.root){for(t.push(this.root);t.length>0;){let n=t.shift();e.push(n.data),null!=n.left&&t.push(n.left),null!=n.right&&t.push(n.right)}return e}return null}}const f="scaning",w="target",p="entry",I="weight";let y=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode"),v=function(){let e=[null],t=new m;this.insert=function(n){if(!t.find(parseInt(n.node?.id))&&(t.add(parseInt(n.node?.id)),e.push(n),e.length>2)){let t=e.length-1;for(;e[t].cost<e[Math.floor(t/2)].cost;)if(t>=1){if([e[Math.floor(t/2)].cost,e[t].cost]=[e[t].cost,e[Math.floor(t/2)].cost],!(Math.floor(t/2)>1))break;t=Math.floor(t/2)}}},this.remove=function(){let n=e[1];if(e.length>2){if(e[1]=e[e.length-1],e.splice(e.length-1),3==e.length)return e[1].cost>e[2].cost&&([e[1],e[2]]=[e[2],e[1]]),n;let t=1,o=2*t,l=2*t+1;for(;(e[t]?.cost>=e[o]?.cost||e[t]?.cost>=e[l]?.cost)&&(e[o].cost<e[l].cost?([e[t],e[o]]=[e[o],e[t]],t*=2):([e[t],e[l]]=[e[l],e[t]],t=2*t+1),o=2*t,l=2*t+1,null!=e[o]?.cost&&null!=e[l]?.cost););}else{if(2!=e.length)return null;e.splice(1,1)}return t.remove(parseInt(n.node.id)),n},this.items=function(){return e},this.best=function(){return e[1]}},N=[],k=0;const E=function(){this.collection=[],this.bestNode=null,this.add=e=>{this.collection.filter((t=>t.node?.id==e.id)).length>0?this.collection=this.collection.filter((t=>t.node?.id!==e.id)):this.collection.push(e)},this.delete=e=>(this.collection=this.collection.filter((t=>t?.node?.id!==e.node.id)),this.collection),this.findBestNode=()=>(this.bestNode=this.collection.reduce(((e,t)=>e.cost>t.cost?t:e)),this.bestNode),this.reSort=()=>this.collection.sort(((e,t)=>e.cost-t.cost)),this.show=()=>{console.log(this.collection)},this.col=()=>this.collection};let S=0,b=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode"),_=[];const M="scaning",H="target",B="entry",L="weight",z=new r;let W=0;const A=z.getWidth(),D=z.getHeight(),$="cell",x=[],O=async(e,t)=>{if(t&&(W=localStorage.getItem("maze_speed")?80*(5-localStorage.getItem("maze_speed"))+20:30,x.push(e),await(async()=>{for(let e=0;e<D;e++){await s(2);for(let t=0;t<A;t++)o(Te[A*e+t],"wall")}})()),0===x.length)return;const n=h(x[x.length-1],2).filter((e=>"cell"!==e.className));if(0===n.length)x.pop();else{o(e,"path"),await s(W);const t=n[(0,l=n.length,Math.floor(Math.random()*(l-0)+0))];x.push(t);const i=((e,t)=>{const n=parseInt(t.id)-parseInt(e.id),o=parseInt(e.id);return n===2*A?Te[o+A]:n===-2*A?Te[o-A]:-2===n?Te[o-1]:2===n?Te[o+1]:void 0})(e,x[x.length-1]);o(i,$,{animationDuration:1e3})}var l;o(e,$),O(x[x.length-1])},j=new r,T=(e,t)=>{const n=j.getWidth();if(j.getHeight(),!e||!t)return null;const o=Math.abs(parseInt(e.id)%n-parseInt(t.id)%n),l=Math.abs(Math.floor(parseInt(e.id)/n)-Math.floor(parseInt(t.id)/n));return Math.ceil(Math.sqrt(o**2+l**2))},q="scaning",P="target",C="entry",R="weight";let F=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode");function G(e,t,n,o,l){this.node=e,this.orgin=t,this.type=n,this.cost=o,this.heuristic=l}const J=function(){this.collection=[],this.bestNode=null,this.add=e=>{this.collection.filter((t=>t.node?.id==e.id)).length>0?this.collection=this.collection.filter((t=>t.node?.id!==e.id)):this.collection.push(e)},this.delete=e=>(this.collection=this.collection.filter((t=>t?.node?.id!==e.node.id)),this.collection),this.findBestNode=()=>(this.bestNode=this.collection.reduce(((e,t)=>e.cost+e.heuristic>t.cost+t.heuristic?t:e)),this.bestNode),this.reSort=()=>this.collection.sort(((e,t)=>e.cost-t.cost)),this.show=()=>{console.log(this.collection)},this.col=()=>this.collection};let K=0,Q=[];const U="scaning",V="target",X="entry",Y="weight";let Z=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode");function ee(e,t,n,o,l){this.node=e,this.orgin=t,this.type=n,this.cost=o,this.heuristic=l}const te=function(){this.collection=[],this.bestNode=null,this.add=e=>{this.collection.filter((t=>t.node?.id==e.id)).length>0?this.collection=this.collection.filter((t=>t.node?.id!==e.id)):this.collection.push(e)},this.delete=e=>(this.collection=this.collection.filter((t=>t?.node?.id!==e.node.id)),this.collection),this.findBestNode=()=>(this.bestNode=this.collection.reduce(((e,t)=>e.heuristic>t.heuristic?t:e)),this.bestNode),this.reSort=()=>this.collection.sort(((e,t)=>e.cost-t.cost)),this.show=()=>{console.log(this.collection)},this.col=()=>this.collection};let ne=0,oe=[];const le=new r,ie=(e,t)=>Math.floor(Math.random()*(t-e)+e);le.getWidth(),le.getHeight();const ae=new r;ae.getWidth(),ae.getHeight();const se="cell",re=new r,ce=re.getWidth(),de=re.getHeight(),he=(e,t)=>Math.floor(Math.random()*(t-e)+e);function ge(){let e=[],t=0;this.init=n=>{e=n,t=n.length},this.items=()=>e,this.size=()=>t,this.findSequence=t=>{let n;for(let o=0;o<e.length;o++)if(n=e[o].every(((e,n)=>e==t[n])),n)return e[o];return null},this.findSequenceIndex=t=>{let n;for(let o=0;o<e.length;o++)if(n=e[o].every(((e,n)=>e==t[n])),n)return o;return null},this.findOne=t=>{let n;for(let o=0;o<e.length;o++)if(n=e[o].includes(t),n)return e[o];return null},this.remove=t=>{const n=this.findSequenceIndex(t);if(null===n)return!1;e=e.slice(0,n).concat(e.slice(n+1,e.length))},this.pushTo=(t,n)=>{const o=this.findSequenceIndex(t);if(null==o)return!1;e=e.map(((e,t)=>t==o?e.concat(n):e))}}let ue;document.getElementById("algo_dijkestra").addEventListener("click",(e=>{localStorage.setItem("algorithm","dijkestra")})),document.getElementById("algo_A_start").addEventListener("click",(e=>{localStorage.setItem("algorithm","a_start")})),document.getElementById("algo_dijkestra_heap_based").addEventListener("click",(e=>{localStorage.setItem("algorithm","dijkestra_heap_based")})),document.getElementById("maze_recursive_backtracking").addEventListener("click",(()=>{localStorage.setItem("maze","recursive_backtracking")})),document.getElementById("maze_basic_random").addEventListener("click",(()=>{localStorage.setItem("maze","basic_random")})),document.getElementById("maze_randomized_kruskal").addEventListener("click",(()=>{localStorage.setItem("maze","randomized_kruskal")})),document.getElementById("algo_greedy").addEventListener("click",(e=>{localStorage.setItem("algorithm","greedy")})),document.querySelector("#clear_maze").addEventListener("click",(()=>qe()));const me=document.getElementById("detail-mode");document.getElementById("detail-mode").addEventListener("click",(()=>{Ae()}));const fe=document.getElementById("maze_algorithm_speed"),we=document.getElementById("algorithm_speed"),pe=document.getElementById("create_maze"),Ie=new r;let ye=1,ve=null,Ne=null,ke=!1;const Ee=Ie.getWidth(),Se=Ie.getHeight();let be=!1,_e=!1,Me=!1,He=!1,Be=null,Le=null;document.addEventListener("mousedown",(e=>{"entry"!=e.target.className&&"target"!=e.target.className||(Be=e.target.className,He=!0)})),document.addEventListener("mouseup",(e=>{He=!1,Be=null}));const ze="entry",We="cell",Ae=()=>{localStorage.setItem("detail-mode",me.checked)},De=()=>new Promise(((e,t)=>{document.addEventListener("keydown",(t=>{if("f"===t.key||"F"==t.key)return e()}))}));localStorage.removeItem("maze_speed"),localStorage.removeItem("algorithm_speed"),localStorage.removeItem("algorithm"),localStorage.removeItem("maze"),localStorage.removeItem("detail-mode");const $e=document.getElementsByClassName("board"),xe=document.getElementById("start_btn");var Oe,je;fe.addEventListener("change",(e=>localStorage.setItem("maze_speed",e.target.value))),we.addEventListener("change",(e=>localStorage.setItem("algorithm_speed",e.target.value))),pe.addEventListener("click",(e=>Ce())),xe.addEventListener("click",(()=>{ke=!ke,Pe()})),$e[0].style.gridTemplateColumns=`repeat( ${Ee} , 30px)`,Oe=Ee,je=Se,$e[0].innerHTML=Array.from(Array.from(Array(Oe*je).keys()),(e=>`<div id='${e}' class='cell'></div>`)).join().replace(/,/g,"");const Te=document.querySelectorAll(".cell"),qe=async()=>{ye=1;for(let e=0;e<Te.length;e++)e%Ee==0&&await s(40),i(Te[e],We),i(Te[Te.length-e-1],We),l(Te[e],""),l(Te[Te.length-e-1],"")},Pe=async e=>{if(3===ye&&ve){const n=localStorage.getItem("algorithm")?localStorage.getItem("algorithm"):null;switch(console.time(),n){case"dijkestra_heap_based":if(e){(e=>{const t=new v,n=async(e,i)=>{if(i&&N.forEach((e=>{"wall"!=e.node.className&&e.node.className!=I&&(o(e.node,"cell"),l(e.node,""))})),N.push(e),o(e.node,i?p:f),e.node.className!==w)d(e.node).forEach((n=>{const o=new a(n,e,f,e.cost+(n.className===I?10:1));t.insert(o)})),t.remove(),n(t.best());else{const t=[];for(;null!==e.orgin;)t.push(e.node),e=e.orgin;for(let e=t.length-1;e>=0;e--)o(t[e],"path")}};n(e,!0)})(new a(ve,null,ze,0));break}await(async e=>new Promise(((t,n)=>{const i=new v,r=async(e,n)=>{if(y=localStorage.getItem("detail-mode"),y&&"false"!==y&&await De(),N.push(e),o(e.node,n?p:f,{animationDuration:500}),!n||(k=20*(5-localStorage.getItem("algorithm_speed"))+2),l(e.node,`c:${e.cost}`),e.node.className===w)return g(e),t();await s(k),d(e.node).forEach((t=>{const n=new a(t,e,f,e.cost+(t.className===I?10:1));y&&o(t,"candidate"),y&&l(t,`c:${n.cost}`),i.insert(n)})),r(i.best()),i.remove()};return r(e,!0)})))(new a(ve,null,ze,0));break;case"dijkestra":default:if(e){(e=>{const t=new E,n=(e,i)=>{if(i&&(_.forEach((e=>{"wall"!=e.node.className&&e.node.className!=L&&(o(e.node,"cell"),l(e.node,""))})),_=[]),_.push(e),o(e.node,i?B:M),e.node.className!==H)t.delete(e),d(e.node).forEach((n=>{const o=new a(n,e,M,e.cost+(n.className===L?30:1));t.add(o)})),n(t.findBestNode());else{const t=[];for(;null!==e.orgin;)t.push(e.node),e=e.orgin;for(let e=t.length-1;e>=0;e--)o(t[e],"path")}};n(e,!0)})(new a(ve,null,ze,0));break}await(t=new a(ve,null,ze,0),new Promise(((e,n)=>{const i=new E,r=async(t,n)=>{if(b=localStorage.getItem("detail-mode"),b&&"false"!==b&&await De(),_.push(t),o(t.node,n?B:M,{animationDuration:500}),!n||(S=20*(5-localStorage.getItem("algorithm_speed"))+2),l(t.node,`c:${t.cost}`),t.node.className===H)return g(t),e();await s(S),i.delete(t),d(t.node).forEach((e=>{const n=new a(e,t,M,t.cost+(e.className===L?30:1));b&&o(e,"candidate"),b&&l(e,`c:${n.cost}`),i.add(n)})),r(i.findBestNode())};return r(t,!0)})));break;case"a_start":if(e){((e,t)=>{const n=new J,i=(e,a)=>{if(Q.push(e),a&&Q.forEach((e=>{"wall"!=e.node.className&&e.node.className!=R&&(o(e.node,"cell"),l(e.node,""))})),o(e.node,a?C:q),e.node.className!==P)n.delete(e),d(e.node).forEach((o=>{const l=e.cost+(o.className===R?10:1),i=T(o,t),a=new G(o,e,q,l,i);n.add(a)})),i(n.findBestNode());else{const t=[];for(;null!==e.orgin;)t.push(e.node),e=e.orgin;for(let e=t.length-1;e>=0;e--)o(t[e],"path")}};i(e,!0)})(new a(ve,null,ze,0),Ne);break}await((e,t)=>{const n=new J,i=async(e,a)=>{!a||(K=20*(5-localStorage.getItem("algorithm_speed"))+2),F=localStorage.getItem("detail-mode"),F&&"false"!==F&&await De(),Q.push(e),o(e.node,a?C:q,{animationDuration:500}),l(e.node,`C:${e.cost} <br/> H:${0==e.cost?0:e.heuristic}`),e.node.className!==P?(await s(K),n.delete(e),d(e.node).forEach((i=>{const a=e.cost+(i.className===R?10:1),s=T(i,t),r=new G(i,e,q,a,s);F&&o(i,"candidate"),F&&l(i,`C:${r.cost} <br/> H:${0==r.cost?0:r.heuristic}`),n.add(r)})),i(n.findBestNode())):g(e)};return i(e,!0)})(new a(ve,null,ze,0),Ne);break;case"greedy":if(e){((e,t)=>{const n=new te,i=(e,a)=>{if(a&&oe.forEach((e=>{"wall"!=e.node.className&&e.node.className!=Y&&(o(e.node,"cell"),l(e.node,""))})),oe.push(e),o(e.node,a?X:U),e.node.className!==V)n.delete(e),d(e.node).forEach((o=>{const l=e.cost+(o.className===Y?10:1),i=T(o,t),a=new ee(o,e,U,l,i);n.add(a)})),i(n.findBestNode());else{const t=[];for(;null!==e.orgin;)t.push(e.node),e=e.orgin;for(let e=t.length-1;e>=0;e--)o(t[e],"path")}};i(e,!0)})(new a(ve,null,ze,0),Ne);break}((e,t)=>{const n=new te,i=async(e,a)=>{!a||(ne=20*(5-localStorage.getItem("algorithm_speed"))+2),Z=localStorage.getItem("detail-mode"),Z&&"false"!==Z&&await De(),oe.push(e),o(e.node,a?X:U,{animationDuration:500}),e.node.className!==V?(await s(ne),n.delete(e),d(e.node).forEach((i=>{const a=e.cost+(i.className===Y?10:1),s=T(i,t),r=new ee(i,e,U,a,s);Z&&o(i,"candidate"),Z&&l(i,`H:${0==r.cost?0:r.heuristic}`),n.add(r)})),i(n.findBestNode())):g(e)};i(e,!0)})(new a(ve,null,ze,0),Ne)}console.timeEnd()}var t},Ce=()=>{switch(ye=1,ve&&o(ve,We),Ne&&i(Ne,We),localStorage.getItem("maze")){case"recursive_backtracking":case"recursive_backtracking":O(Te[Ee+1],!0);break;case"basic_random":(async()=>{for(let e=0;e<100;e++)await s(5),o(Te[ie(0,Te.length)],"wall",{animationDuration:1e3}),o(Te[ie(0,Te.length)],"weight",{animationDuration:1e3})})();break;default:(async()=>{const e=(()=>{const e=new ge,t=Array.from(Array.from(Array(ce*de).keys()),(e=>[e])).filter((e=>e%ce%2!=0&&parseInt(e/ce)%2!=0));return e.init(t),e})(),t=async n=>{if(n&&await(async()=>{for(let e=0;e<de;e++){await s(2);for(let t=0;t<ce;t++)o(Te[ce*e+t],"wall")}})(),n&&(ue=localStorage.getItem("maze_speed")?80*(5-localStorage.getItem("maze_speed"))+20:30),1===e.items().length)return;const l=e.items()[he(0,e.items().length)],i=l.length>1?l[he(0,l.length)]:l[0],a=h(Te[i],2);if(0===a.length)return console.log("%c neighours empty","background : purple"),void t();const r=a.length>1?a[he(0,a.length)]:a[0],c=((e,t)=>{const n=parseInt(t.id)-parseInt(e.id),o=parseInt(e.id);return n===2*ce?Te[o+ce]:n===-2*ce?Te[o-ce]:-2===n?Te[o-1]:2===n?Te[o+1]:void 0})(Te[i],r),d=e.findOne(i),g=e.findOne(parseInt(r.id));d.every(((e,t)=>e===g[t]))||(await s(ue),o(Te[i],se),await s(ue/2),o(c,se),await s(ue/2),o(r,se),e.pushTo(d,g),e.remove(g)),t()};t(!0)})()}};Te.forEach((e=>{e.addEventListener("click",(e=>{(e=>{switch(ye){case 0:O(Te[Ee+1],!0),ye+=1;break;case 1:o(e,"target"),Ne=e,ye+=1;break;case 2:o(e,ze),ve=e,ye+=1}})(e.target)}))})),window.addEventListener("keydown",(e=>{be="x"===e.key,_e="w"===e.key,Me="e"===e.key,"v"==e.key&&Pe(),"m"==e.key&&Ce()})),window.addEventListener("keyup",(()=>{be=!1,_e=!1,Me=!1})),Te.forEach((e=>{e.addEventListener("mouseover",(e=>{be&&(o(e.target,"weight"),l(e.target,3)),_e&&o(e.target,"wall"),Me&&o(e.target,We),He&&(Le=e.target.className,("entry"==Be&&"target"!==e.target.className||"target"==Be&&"entry"!==e.target.className)&&(i(e.target,Be),"entry"==Be?ve=e.target:"target"==Be&&(Ne=e.target),console.log(ye),ye>1&&Pe(!0)))}))})),Te.forEach((e=>{e.addEventListener("mouseout",(e=>{He&&i(e.target,Le||We)}))}))})();