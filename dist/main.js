/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{g:()=>$t,C:()=>Lt});const e="target",n={animationDuration:1e3,default:!0},o=(t,o,i=n)=>{t.style.animationDuration=i.default?"":`${i.animationDuration}ms`,t.className=t.className===e?e:o},i=(t,e)=>{localStorage.getItem("WIDTH")<40&&(t.innerHTML=e)},l=(t,e,o=n)=>{t.style.animationDuration=o.default?"":`${o.animationDuration}ms`,t.className=e};function a(t,e,n,o){this.node=t,this.orgin=e,this.type=n,this.cost=o}const s=t=>new Promise(((e,n)=>{setTimeout((()=>{e()}),t||30)}));function r(){let t=(parseInt(window.innerWidth/30)-2)%2==0?parseInt(window.innerWidth/30)-3:parseInt(window.innerWidth/30)-2,e=window.innerWidth<400?parseInt(window.innerHeight/30)-3:parseInt(window.innerHeight/30)-3-2,n=!1,o=null,i=null;localStorage.setItem("WIDTH",t),localStorage.setItem("HEIGHT",e),this.getWidth=()=>t,this.getHeight=()=>e,this.getAlgorithm=()=>o,this.getMazeAlgorithm=()=>i,this.getRunning=()=>n,this.swapRunning=()=>{n=!n},this.setAlgorithm=t=>{o=t},this.setMazeAlgorithm=t=>{i=t},this.setWidth=e=>{t=e,console.log(t)},this.setHeight=t=>{e=t}}const c=new r,d=(t,e=1,n=!1)=>{const o=c.getWidth(),i=c.getHeight();if(!t)return[];const l=[],a=parseInt(t.id);return a-o*e>=0&&l.push($t[a-o*e]),a%o+e<o&&l.push($t[a+1*e]),a+o*e<o*i&&l.push($t[a+o*e]),a%o>=e&&l.push($t[a-1*e]),l?l.filter((t=>"cell"===t.className||"weight"===t.className||"target"===t.className||n?"wall":"")):[]},h=(t,e=1,n)=>{const o=c.getWidth(),i=c.getHeight();if(!t)return[];const l=[],a=parseInt(t.id);return a-o*e>=0&&l.push($t[a-o*e]),a%o+e<o&&l.push($t[a+1*e]),a+o*e<o*i&&l.push($t[a+o*e]),a%o>=e&&l.push($t[a-1*e]),l?n?l.filter((t=>n.includes(t.className))):l:[]},u=async t=>{const e=[];for(;null!==t.orgin;)e.push(t.node),t=t.orgin;for(let t=e.length-1;t>=0;t--)await s(10),o(e[t],"path",{animationDuration:1e3})};class g{constructor(t,e=null,n=null){this.data=t,this.left=e,this.right=n}}class f{constructor(){this.root=null}add(t){const e=this.root;if(null!==e){const n=function(e){if(t<e.data){if(null===e.left)return void(e.left=new g(t));if(null!==e.left)return n(e.left)}else{if(!(t>e.data))return null;if(null===e.right)return void(e.right=new g(t));if(null!==e.right)return n(e.right)}};return n(e)}this.root=new g(t)}findMin(){let t=this.root;for(;null!==t.left;)t=t.left;return t.data}findMax(){let t=this.root;for(;null!==t.right;)t=t.right;return t.data}find(t){if(!t||!this.root)return null;let e=this.root;for(;e.data!==t;)if(e=t<e.data?e.left:e.right,null===e)return null;return e}isPresent(t){let e=this.root;for(;e;){if(t===e.data)return!0;e=t<e.data?e.left:e.right}return!1}remove(t){const e=function(t,n){if(null==t)return null;if(n==t.data){if(null==t.left&&null==t.right)return null;if(null==t.left)return t.right;if(null==t.right)return t.left;for(var o=t.right;null!==o.left;)o=o.left;return t.data=o.data,t.right=e(t.right,o.data),t}return n<t.data?(t.left=e(t.left,n),t):(t.right=e(t.right,n),t)};this.root=e(this.root,t)}isBalanced(){return this.findMinHeight()>=this.findMaxHeight()-1}findMinHeight(t=this.root){if(null==t)return-1;let e=this.findMinHeight(t.left),n=this.findMinHeight(t.right);return e<n?e+1:n+1}findMaxHeight(t=this.root){if(null==t)return-1;let e=this.findMaxHeight(t.left),n=this.findMaxHeight(t.right);return e>n?e+1:n+1}inOrder(){if(null==this.root)return null;{var t=new Array;function e(n){n.left&&e(n.left),t.push(n.data),n.right&&e(n.right)}return e(this.root),t}}preOrder(){if(null==this.root)return null;{var t=new Array;function e(n){t.push(n.data),n.left&&e(n.left),n.right&&e(n.right)}return e(this.root),t}}postOrder(){if(null==this.root)return null;{var t=new Array;function e(n){n.left&&e(n.left),n.right&&e(n.right),t.push(n.data)}return e(this.root),t}}levelOrder(){let t=[],e=[];if(null!=this.root){for(e.push(this.root);e.length>0;){let n=e.shift();t.push(n.data),null!=n.left&&e.push(n.left),null!=n.right&&e.push(n.right)}return t}return null}}const m="scaning",w="target",p="entry",I="weight";let y=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode"),v=function(){let t=[null],e=new f;this.insert=function(n){if(!e.find(parseInt(n.node?.id))&&(e.add(parseInt(n.node?.id)),t.push(n),t.length>2)){let e=t.length-1;for(;t[e].cost<t[Math.floor(e/2)].cost;)if(e>=1){if([t[Math.floor(e/2)].cost,t[e].cost]=[t[e].cost,t[Math.floor(e/2)].cost],!(Math.floor(e/2)>1))break;e=Math.floor(e/2)}}},this.remove=function(){let n=t[1];if(t.length>2){if(t[1]=t[t.length-1],t.splice(t.length-1),3==t.length)return t[1].cost>t[2].cost&&([t[1],t[2]]=[t[2],t[1]]),n;let e=1,o=2*e,i=2*e+1;for(;(t[e]?.cost>=t[o]?.cost||t[e]?.cost>=t[i]?.cost)&&(t[o].cost<t[i].cost?([t[e],t[o]]=[t[o],t[e]],e*=2):([t[e],t[i]]=[t[i],t[e]],e=2*e+1),o=2*e,i=2*e+1,null!=t[o]?.cost&&null!=t[i]?.cost););}else{if(2!=t.length)return null;t.splice(1,1)}return e.remove(parseInt(n.node.id)),n},this.items=function(){return t},this.best=function(){return t[1]}},N=[],E=0;const S=function(){this.collection=[],this.bestNode=null,this.add=t=>{this.collection.filter((e=>e.node?.id==t.id)).length>0?this.collection=this.collection.filter((e=>e.node?.id!==t.id)):this.collection.push(t)},this.delete=t=>(this.collection=this.collection.filter((e=>e?.node?.id!==t.node.id)),this.collection),this.findBestNode=()=>(this.bestNode=this.collection.reduce(((t,e)=>t.cost>e.cost?e:t)),this.bestNode),this.reSort=()=>this.collection.sort(((t,e)=>t.cost-e.cost)),this.show=()=>{console.log(this.collection)},this.col=()=>this.collection};let k=0,b=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode"),_=[];const M="scaning",x="target",H="entry",B="weight",L=new r;let D=0;const A=L.getWidth(),W=L.getHeight(),z="cell",$=[],j=async(t,e)=>{if(e&&(D=localStorage.getItem("maze_speed")?80*(5-localStorage.getItem("maze_speed"))+20:30,$.push(t),await(async()=>{for(let t=0;t<W;t++){await s(2);for(let e=0;e<A;e++)o($t[A*t+e],"wall")}})()),0===$.length)return;const n=h($[$.length-1],2).filter((t=>"cell"!==t.className));if(0===n.length)$.pop();else{o(t,"path"),await s(D);const e=n[(0,i=n.length,Math.floor(Math.random()*(i-0)+0))];$.push(e);const l=((t,e)=>{const n=parseInt(e.id)-parseInt(t.id),o=parseInt(t.id);return n===2*A?$t[o+A]:n===-2*A?$t[o-A]:-2===n?$t[o-1]:2===n?$t[o+1]:void 0})(t,$[$.length-1]);o(l,z,{animationDuration:1e3})}var i;o(t,z),j($[$.length-1])},O=new r,P=(t,e)=>{const n=O.getWidth();if(O.getHeight(),!t||!e)return null;const o=Math.abs(parseInt(t.id)%n-parseInt(e.id)%n),i=Math.abs(Math.floor(parseInt(t.id)/n)-Math.floor(parseInt(e.id)/n));return Math.ceil(Math.sqrt(o**2+i**2))},T="scaning",C="target",q="entry",R="weight";let F=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode");function G(t,e,n,o,i){this.node=t,this.orgin=e,this.type=n,this.cost=o,this.heuristic=i}const J=function(){this.collection=[],this.bestNode=null,this.add=t=>{this.collection.filter((e=>e.node?.id==t.id)).length>0?this.collection=this.collection.filter((e=>e.node?.id!==t.id)):this.collection.push(t)},this.delete=t=>(this.collection=this.collection.filter((e=>e?.node?.id!==t.node.id)),this.collection),this.findBestNode=()=>(this.bestNode=this.collection.reduce(((t,e)=>t.cost+t.heuristic>e.cost+e.heuristic?e:t)),this.bestNode),this.reSort=()=>this.collection.sort(((t,e)=>t.cost-e.cost)),this.show=()=>{console.log(this.collection)},this.col=()=>this.collection};let K=0,Q=[];const U="scaning",V="target",X="entry",Y="weight";let Z=!!localStorage.getItem("detail-mode")&&localStorage.getItem("detail-mode");function tt(t,e,n,o,i){this.node=t,this.orgin=e,this.type=n,this.cost=o,this.heuristic=i}const et=function(){this.collection=[],this.bestNode=null,this.add=t=>{this.collection.filter((e=>e.node?.id==t.id)).length>0?this.collection=this.collection.filter((e=>e.node?.id!==t.id)):this.collection.push(t)},this.delete=t=>(this.collection=this.collection.filter((e=>e?.node?.id!==t.node.id)),this.collection),this.findBestNode=()=>(this.bestNode=this.collection.reduce(((t,e)=>t.heuristic>e.heuristic?e:t)),this.bestNode),this.reSort=()=>this.collection.sort(((t,e)=>t.cost-e.cost)),this.show=()=>{console.log(this.collection)},this.col=()=>this.collection};let nt=0,ot=[];const it=new r;it.getWidth(),it.getHeight();const lt=new r,at=lt.getWidth(),st=lt.getHeight(),rt=(t,e)=>Math.floor(Math.random()*(e-t)+t),ct="wall";function dt(){var t=0,e=null,n=function(t){this.element=t,this.next=null};this.size=function(){return t},this.head=function(){return e},this.print=function(){let t=e,n=[];for(;t;)n.push(t.element),t=t.next;console.log(n.join("_"))},this.add=function(o){var i=new n(o);if(null===e)e=i;else{for(var l=e;l.next;)l=l.next;l.next=i}t++},this.remove=function(n){var o,i=e;if(i.element===n)e=i.next;else{for(;i.element!==n;)o=i,i=i.next;o.next=i.next}t--},this.isEmpty=function(){return 0===t},this.indexOf=function(t){for(var n=e,o=-1;n;){if(o++,n.element===t)return o;n=n.next}return-1},this.elementAt=function(t){for(var n=e,o=0;o<t;)o++,n=n.next;return n.element},this.addAt=function(o,i){var l,a=new n(i),s=e,r=0;if(o>t)return!1;if(0===o)a.next=s,e=a;else{for(;r<o;)r++,l=s,s=s.next;a.next=s,l.next=a}t++},this.removeAt=function(n){var o,i=e,l=0;if(n<0||n>=t)return null;if(0===n)e=i.next;else{for(;l<n;)l++,o=i,i=i.next;o.next=i.next}return t--,i.element}}document.getElementById("algo_dijkestra").addEventListener("click",(t=>{localStorage.setItem("algorithm","dijkestra")})),document.getElementById("algo_A_start").addEventListener("click",(t=>{localStorage.setItem("algorithm","a_start")})),document.getElementById("algo_dijkestra_heap_based").addEventListener("click",(t=>{localStorage.setItem("algorithm","dijkestra_heap_based")})),document.getElementById("algo_greedy").addEventListener("click",(t=>{localStorage.setItem("algorithm","greedy")})),document.querySelector("#clear_maze").addEventListener("click",(()=>jt()));const ht=document.getElementById("detail-mode");document.getElementById("detail-mode").addEventListener("click",(()=>{Bt()}));const ut=document.getElementById("maze_algorithm_speed"),gt=document.getElementById("algorithm_speed"),ft=document.getElementById("create_maze"),mt=new r;let wt=1,pt=null,It=null,yt=!1;const vt=mt.getWidth(),Nt=mt.getHeight();let Et=!1,St=!1,kt=!1,bt=!1,_t=null,Mt=null;document.addEventListener("mousedown",(t=>{"entry"!=t.target.className&&"target"!=t.target.className||(_t=t.target.className,bt=!0)})),document.addEventListener("mouseup",(t=>{bt=!1,_t=null}));const xt="entry",Ht="cell",Bt=()=>{localStorage.setItem("detail-mode",ht.checked)},Lt=()=>new Promise(((t,e)=>{document.addEventListener("keydown",(e=>{if("f"===e.key||"F"==e.key)return t()}))}));localStorage.removeItem("maze_speed"),localStorage.removeItem("algorithm_speed"),localStorage.removeItem("algorithm"),localStorage.removeItem("detail-mode");const Dt=document.getElementsByClassName("board"),At=document.getElementById("start_btn");var Wt,zt;ut.addEventListener("change",(t=>localStorage.setItem("maze_speed",t.target.value))),gt.addEventListener("change",(t=>localStorage.setItem("algorithm_speed",t.target.value))),ft.addEventListener("click",(t=>Pt())),At.addEventListener("click",(()=>{yt=!yt,Ot()})),Dt[0].style.gridTemplateColumns=`repeat( ${vt} , 30px)`,Wt=vt,zt=Nt,Dt[0].innerHTML=Array.from(Array.from(Array(Wt*zt).keys()),(t=>`<div id='${t}' class='cell'></div>`)).join().replace(/,/g,"");const $t=document.querySelectorAll(".cell"),jt=async()=>{wt=1;for(let t=0;t<$t.length;t++)t%vt==0&&await s(200),l($t[t],Ht,{animationDuration:800}),l($t[$t.length-t-1],Ht,{animationDuration:800}),i($t[t],""),i($t[$t.length-t-1],"")},Ot=async t=>{if(3===wt&&pt){const n=localStorage.getItem("algorithm")?localStorage.getItem("algorithm"):null;switch(console.time(),n){case"dijkestra_heap_based":if(t){(t=>{const e=new v,n=async(t,l)=>{if(l&&N.forEach((t=>{"wall"!=t.node.className&&t.node.className!=I&&(o(t.node,"cell"),i(t.node,""))})),N.push(t),o(t.node,l?p:m),t.node.className!==w)d(t.node).forEach((n=>{const o=new a(n,t,m,t.cost+(n.className===I?10:1));e.insert(o)})),e.remove(),n(e.best());else{const e=[];for(;null!==t.orgin;)e.push(t.node),t=t.orgin;for(let t=e.length-1;t>=0;t--)o(e[t],"path")}};n(t,!0)})(new a(pt,null,xt,0));break}await(async t=>new Promise(((e,n)=>{const l=new v,r=async(t,n)=>{if(y=localStorage.getItem("detail-mode"),y&&"false"!==y&&await Lt(),N.push(t),o(t.node,n?p:m,{animationDuration:500}),!n||(E=20*(5-localStorage.getItem("algorithm_speed"))+2),i(t.node,`c:${t.cost}`),t.node.className===w)return u(t),e();await s(E),d(t.node).forEach((e=>{const n=new a(e,t,m,t.cost+(e.className===I?10:1));y&&o(e,"candidate"),y&&i(e,`c:${n.cost}`),l.insert(n)})),r(l.best()),l.remove()};return r(t,!0)})))(new a(pt,null,xt,0));break;case"dijkestra":default:if(t){(t=>{const e=new S,n=(t,l)=>{if(l&&(_.forEach((t=>{"wall"!=t.node.className&&t.node.className!=B&&(o(t.node,"cell"),i(t.node,""))})),_=[]),_.push(t),o(t.node,l?H:M),t.node.className!==x)e.delete(t),d(t.node).forEach((n=>{const o=new a(n,t,M,t.cost+(n.className===B?30:1));e.add(o)})),n(e.findBestNode());else{const e=[];for(;null!==t.orgin;)e.push(t.node),t=t.orgin;for(let t=e.length-1;t>=0;t--)o(e[t],"path")}};n(t,!0)})(new a(pt,null,xt,0));break}await(e=new a(pt,null,xt,0),new Promise(((t,n)=>{const l=new S,r=async(e,n)=>{if(b=localStorage.getItem("detail-mode"),b&&"false"!==b&&await Lt(),_.push(e),o(e.node,n?H:M,{animationDuration:500}),!n||(k=20*(5-localStorage.getItem("algorithm_speed"))+2),i(e.node,`c:${e.cost}`),e.node.className===x)return u(e),t();await s(k),l.delete(e),d(e.node).forEach((t=>{const n=new a(t,e,M,e.cost+(t.className===B?30:1));b&&o(t,"candidate"),b&&i(t,`c:${n.cost}`),l.add(n)})),r(l.findBestNode())};return r(e,!0)})));break;case"a_start":if(t){((t,e)=>{const n=new J,l=(t,a)=>{if(Q.push(t),a&&Q.forEach((t=>{"wall"!=t.node.className&&t.node.className!=R&&(o(t.node,"cell"),i(t.node,""))})),o(t.node,a?q:T),t.node.className!==C)n.delete(t),d(t.node).forEach((o=>{const i=t.cost+(o.className===R?10:1),l=P(o,e),a=new G(o,t,T,i,l);n.add(a)})),l(n.findBestNode());else{const e=[];for(;null!==t.orgin;)e.push(t.node),t=t.orgin;for(let t=e.length-1;t>=0;t--)o(e[t],"path")}};l(t,!0)})(new a(pt,null,xt,0),It);break}await((t,e)=>{const n=new J,l=async(t,a)=>{!a||(K=20*(5-localStorage.getItem("algorithm_speed"))+2),F=localStorage.getItem("detail-mode"),F&&"false"!==F&&await Lt(),Q.push(t),o(t.node,a?q:T,{animationDuration:500}),i(t.node,`C:${t.cost} <br/> H:${0==t.cost?0:t.heuristic}`),t.node.className!==C?(await s(K),n.delete(t),d(t.node).forEach((l=>{const a=t.cost+(l.className===R?10:1),s=P(l,e),r=new G(l,t,T,a,s);F&&o(l,"candidate"),F&&i(l,`C:${r.cost} <br/> H:${0==r.cost?0:r.heuristic}`),n.add(r)})),l(n.findBestNode())):u(t)};return l(t,!0)})(new a(pt,null,xt,0),It);break;case"greedy":if(t){((t,e)=>{const n=new et,l=(t,a)=>{if(a&&ot.forEach((t=>{"wall"!=t.node.className&&t.node.className!=Y&&(o(t.node,"cell"),i(t.node,""))})),ot.push(t),o(t.node,a?X:U),t.node.className!==V)n.delete(t),d(t.node).forEach((o=>{const i=t.cost+(o.className===Y?10:1),l=P(o,e),a=new tt(o,t,U,i,l);n.add(a)})),l(n.findBestNode());else{const e=[];for(;null!==t.orgin;)e.push(t.node),t=t.orgin;for(let t=e.length-1;t>=0;t--)o(e[t],"path")}};l(t,!0)})(new a(pt,null,xt,0),It);break}((t,e)=>{const n=new et,l=async(t,a)=>{!a||(nt=20*(5-localStorage.getItem("algorithm_speed"))+2),Z=localStorage.getItem("detail-mode"),Z&&"false"!==Z&&await Lt(),ot.push(t),o(t.node,a?X:U,{animationDuration:500}),t.node.className!==V?(await s(nt),n.delete(t),d(t.node).forEach((l=>{const a=t.cost+(l.className===Y?10:1),s=P(l,e),r=new tt(l,t,U,a,s);Z&&o(l,"candidate"),Z&&i(l,`H:${0==r.cost?0:r.heuristic}`),n.add(r)})),l(n.findBestNode())):u(t)};l(t,!0)})(new a(pt,null,xt,0),It)}console.timeEnd()}var e},Pt=()=>{wt=1,pt&&o(pt,Ht),It&&l(It,Ht),localStorage.getItem("maze_algo"),(async()=>{const t=(()=>{const t=new dt;for(let e=0;e<st;e++)for(let n=0;n<at;n++)e%2!=0&&n%2!=0&&t.add(at*e+n);return t})(),e=async()=>{if(t.print(),1==t.size)return;let n=t.head(),i=0;const l=rt(0,t.size());for(;i!==l;)n=n.next,i+=1;const a=h($t[n.element],2),r=a[rt(0,a.length)],c=((t,e)=>{const n=parseInt(e.id)-parseInt(t.id),o=parseInt(t.id);return n===2*at?$t[o+at]:n===-2*at?$t[o-at]:-2===n?$t[o-1]:2===n?$t[o+1]:void 0})($t[n.element],$t[r.id]);t.remove(n.element),"cell"==$t[parseInt(r.id)].className&&t.remove(parseInt(r.id)),o($t[n.element],ct,{animationDuration:100}),await s(5),o($t[c.id],ct,{animationDuration:100}),await s(5),o($t[parseInt(r.id)],ct,{animationDuration:100}),await s(5),e()};e()})()};$t.forEach((t=>{t.addEventListener("click",(t=>{(t=>{switch(wt){case 0:j($t[vt+1],!0),wt+=1;break;case 1:o(t,"target"),It=t,wt+=1;break;case 2:o(t,xt),pt=t,wt+=1}})(t.target)}))})),window.addEventListener("keydown",(t=>{Et="x"===t.key,St="w"===t.key,kt="e"===t.key,"v"==t.key&&Ot(),"m"==t.key&&Pt()})),window.addEventListener("keyup",(()=>{Et=!1,St=!1,kt=!1})),$t.forEach((t=>{t.addEventListener("mouseover",(t=>{Et&&(o(t.target,"weight"),i(t.target,3)),St&&o(t.target,"wall"),kt&&o(t.target,Ht),bt&&(Mt=t.target.className,("entry"==_t&&"target"!==t.target.className||"target"==_t&&"entry"!==t.target.className)&&(l(t.target,_t),"entry"==_t?pt=t.target:"target"==_t&&(It=t.target),console.log(wt),wt>1&&Ot(!0)))}))})),$t.forEach((t=>{t.addEventListener("mouseout",(t=>{bt&&l(t.target,Mt||Ht)}))}))})();